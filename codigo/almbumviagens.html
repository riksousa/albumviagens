<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link href="style.css" rel="stylesheet" type="text/css" />
    <link href="ambum.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.js"></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.css' rel='stylesheet' />
    <title>Fotos do album!</title>

    <title>Document</title>
</head>
<body>
    <header>
        <nav>

            <nav class="navbar navbar-expand-lg bg-body-tertiary">
                <div class="container-fluid">
                    <div class="logo1">
                        <img src="imagens/61f7cd9467553f0004c53e76.png" class="d-block w-100" alt="..."></div>
                        <div class="logo">
                      <h1 id="title"></h1>
                    </div>
                  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                  </button>
                  <div class="barra-menu">
                  <div class="collapse navbar-collapse"id="navbarNav">
                    <ul class="navbar-nav">
                      <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="index.html">Home</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" href="index.html">Sobre</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" href="index.html">Projeto</a>
                      </li>

                    </ul>
                  </div>
                </div>
            </div>
        </header>

        <div class="Album-Minas-gerais mt-4 mb-4">
            <h2>Álbum </h2>
            <div class="topic-division">

            </div>
        </div>


        <div class="container mx-auto">
            <div class="row" style="display: flex;">
                <div class="col">
                    <img id="capa-album" alt="Capa do Album" class="gerais">
                </div>
            <div class="col">

                <h5>Descrição</h5>

                <p id="descricao-album"></p>


                <div class="col-12">
                    <h5>Localização:</h5>
                    <p id="localizacao-album"></p>

                    <h5 class="ml-3">Data do registro:&nbsp</h5>
                    <p id="data-registro"></p>
                </div>
                </div>
            </div>
        </div>

        <br>
        <br>
        <br>

         <div id="map"></div>




    <div class="content container-fluid">

            <div class="albumtext">
                <div class="topic-division">
                <h4>Lista de Álbuns</h4>
                </div>

            </div>

        <div  class="row" id="fotos-da-cidade"></div>

        <div id="openModal" class="modalDialog">
          <div>
            <a href="#close" title="Close" class="close">X</a>
            
            <div class="imagens2">
              <div class="col-10 mx-auto">
               <div id="carouselExampleAutoplaying" class="carousel slide" data-bs-ride="carousel">
                 <div class="carousel-inner">
                   <div class="carousel-item active">
                     <img src="imagens/goais/image1.webp" class="d-block" alt="...">
                   </div>
                   <div class="carousel-item">
                      <img src="imagens/matogrosso/imagem capa.jpg" class="d-block" alt="...">
                    </div>
              
                    <div class="carousel-item">
                      <img src="imagens/pernambuco/imagem capa.jfif" class="d-block" alt="...">
                    </div>
                    <div class="carousel-item">
                       <img src="imagens/PortoAlegre/Imagemcapa.jpg" class="d-block" alt="...">
                     </div>
                     <div class="carousel-item">
                       <img src="imagens/Rj/image capa.jpg" class="d-block" alt="...">
                     </div>
                     <div class="carousel-item">
                       <img src="imagens/Amazonas/imagem-capa.jpg" class="d-block" alt="...">
                     </div>
                     <div class="carousel-item">
                       <img src="imagens/istockphoto-1021380426-612x612.jpg" class="d-block" alt="...">
                     </div>
                     <div class="carousel-item">
                       <img src="imagens/MinasGerais/img  capa.jpg" class="d-block" alt="...">
                     </div>
                     <div class="carousel-item">
                       <img src="imagens/goais/imgem6.jpg" class="d-block" alt="...">
                     </div>
                     <div class="carousel-item">
                       <img src="imagens/PortoAlegre/iii.jpg" class="d-block" alt="...">
                     </div>
                     <div class="carousel-item">
                       <img src="imagens/Amazonas/imagem9.jpg" class="d-block" alt="...">
                     </div>
                     <div class="carousel-item">
                       <img src="imagens/bahia/imagem7.jpg" class="d-block" alt="...">
                     </div>
                  </div>
                   
             
                 <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="prev">
                   <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                   <span class="visually-hidden">Previous</span>
                 </button>
             
                 <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="next">
                   <span class="carousel-control-next-icon" aria-hidden="true"></span>
                   <span class="visually-hidden">Next</span>

                 </button>
                 
               </div>
           </div>
               </div>
              </div>
          </div>
        </div>


                 



          <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
          integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
          crossorigin="anonymous"></script>
          <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
          integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
          crossorigin="anonymous"></script>
          <script>
          mapboxgl.accessToken = 'pk.eyJ1IjoibGVvbWVuZGVzMTIzIiwiYSI6ImNscG14aDl5MjBiZjkya3I0N2hldnM1Y3gifQ.sGtLiYr0o8UjRwpJGqd5Gw';
          let cntr = ["-19.859436903783603", "-43.91853253009936"];

          const maps = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/mapbox/streets-v12',
            center: [-43.93862551205571,-19.919065376393224],
            zoom: 5
          });
          let AlbunsArray;

          const queryString = window.location.search.substr(1);
          const albumId = queryString.split("=")[1] || 1

          fetch(`https://jsonserver-1--rikutoshiki1505.repl.co/albuns/${albumId}`)
            .then(response => response.json())
            .then(data => {
              document.getElementById("title").innerHTML = data.Titulo
              document.getElementById("descricao-album").innerHTML = data.Descrição
              document.getElementById("data-registro").innerHTML = data.Data
              document.getElementById("capa-album").src = data.url
              document.getElementById("localizacao-album").innerHTML = data.localizacao_descrita
            })

          fetch(`https://jsonserver-1--rikutoshiki1505.repl.co/fotos/?album=${albumId}`)
            .then(response => response.json())
            .then(data => {
              data.forEach(foto => {
                const cidade = document.createElement('div')
                cidade.className = 'card col-sm-10 col-md-3 col-lg-3 m-1 mx-auto mb-3'
                cidade.id = `card${foto.id}`

                const cardLink = document.createElement('a')
                cardLink.href = 'almbumviagens.html'

                const modalLink = document.createElement('a')
                modalLink.href = "#openModal"

                const img = document.createElement('img')
                img.src = foto.url
                img.className = "card-img-top w-60 p-2"

                const descricao = document.createElement('div')
                descricao.className = 'card-body   mt-0 m-1  p-1 mb-2 text-center rounded'

                const nomeCidade = document.createElement('h4')
                nomeCidade.innerHTML = foto.nome || 'placeholder'

                const descricaoTexto = document.createElement('p')
                descricaoTexto.className = 'card-text m-1 fs-5 text'
                descricaoTexto.innerHTML = foto.descricao

                descricao.appendChild(nomeCidade)
                descricao.appendChild(descricaoTexto)

                modalLink.appendChild(img)

                cardLink.appendChild(modalLink)
                cardLink.appendChild(descricao)

                cidade.appendChild(cardLink)

                document.querySelector('#fotos-da-cidade').appendChild(cidade)
              })
            })


fetch(`https://jsonserver-1--rikutoshiki1505.repl.co/albuns`)
  .then(response => response.json())
  .then(data => {
    const colorsArray = ["blue", "red", "green", "purple"]
    data.forEach((album) => {
      if (album.id != albumId) return

      let popup = new mapboxgl.Popup({offset: 25})
        .setHTML(`<h4><a href=AlbumPage.html?albumId=${album.id}  target="_blank">${album.Titulo}</a></h4><br>${album.Descrição}<br>`);

      const marker = new mapboxgl.Marker({color: colorsArray[Math.floor(Math.random() * (colorsArray.length - 1))]})
        .setLngLat(album.localizacao)
        .setPopup(popup)
        .addTo(maps);
    })

    function processarGeo(local) {
      let popup = new mapboxgl.Popup({offset: 25})
        .setHTML(`<h4>Sua localização!</h4>`);
      const marker = new mapboxgl.Marker({color: 'yellow'})
        .setLngLat([local.coords.longitude, local.coords.latitude])
        .setPopup(popup)
        .addTo(maps);
    }

    navigator.geolocation.getCurrentPosition(processarGeo, () => {alert('Favor, permitir a localização na página!')})
  })


          </script>




    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>
</html>
